{"remainingRequest":"D:\\开发目录\\test-main\\vue-project\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\开发目录\\test-main\\vue-project\\src\\components\\signpage.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\开发目录\\test-main\\vue-project\\src\\components\\signpage.vue","mtime":1688209781701},{"path":"D:\\开发目录\\test-main\\vue-project\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\开发目录\\test-main\\vue-project\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"D:\\开发目录\\test-main\\vue-project\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\开发目录\\test-main\\vue-project\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport io from 'socket.io-client';\nimport router from 'src/router.js';\n\nexport default {\n  data() {\n    return {\n      mess:\"\",\n      messStyle:\"#58bc58\",\n      show:false,\n      account: \"\",\n      password: \"\",\n      Indonesia:\"\",\n      Verification:\"\",\n      message: '',\n      receivedMessage: '',\n      socket:null\n    };\n  },\n  created() {\n    this.randomNum()\n  },\n  methods: {\n    getCookie(key) {//获取cookie值\n        var cookies = document.cookie;//name=malin; pwd=123456\n        var arr = cookies.split('; ');//['name=malin','pwd=123456']\n        for (var i = 0; i < arr.length; i++) {\n          var arr2 = arr[i].split('=');//['name','malin'\n          if (key == arr2[0]) {\n            return arr2[1];\n          }\n        };\n    },\n    async randomNum() {\n      let codeData = await this.$axios({\n        method: \"get\",\n        url: \"http://localhost:5000/user/get_Indonesia\",\n      });\n      this.Verification = \"data:image/jpg;base64,\"+codeData.data;\n    },\n    onClickLeft() {\n      // router.push({ name: \"home\" });\n      window.location.hash = \"#/\";\n      console.log(window.location.hash);\n    },\n    async sign1() {\n      let repData = await this.$axios({\n        method: \"post\",\n        url: \"http://localhost:5000/user/login/password\",\n        data: {\n          account: this.account,\n          password: this.password,\n          Indonesia: this.Indonesia\n        }\n      });\n      //登录成功\n      if(repData.data.code == 200){\n        this.messStyle = 'color:#58bc58'\n        this.$router.push({path: \"footer/home\"});\n        document.cookie = \"username\" + \"=\" + this.account + \";path=/\";\n        document.cookie = \"password\" + \"=\" + this.password + \";path=/\";\n        document.cookie = \"id\" + \"=\" + repData.data.data.id + \";path=/\";\n        //发送更新用户连接信息到socket\n      }else{\n        //登录失败\n        this.messStyle = 'color:red'\n      }\n      this.mess = repData.data.message;\n      this.show = true;\n    }\n  },\n  sockets:{\n    connect: function(){\n      console.log('socket 连接成功')\n      const data = {\n        socketid:this.$socket.id,\n        userid:getCookie('id')\n      }\n      this.$socket.emit('init',data);\n    },\n    message: function(val){\n      console.log('message:'+val);\n      this.log_list.push(val);\n    },\n    init: function(val){\n      console.log('init:'+val);\n      this.log_list.push(val);\n    },\n    sendmessage: function(val){\n      console.log('sendmessage:'+val);\n      this.log_list.push(val);\n    }\n  },\n\n};\n",{"version":3,"sources":["signpage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsCA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"signpage.vue","sourceRoot":"src/components","sourcesContent":["<template>\n\n  <div class=\"sign\">\n\n    <van-nav-bar title=\"登陆\" left-arrow @click-left=\"onClickLeft\" />\n\n    <van-cell-group>\n      <van-field v-model=\"account\" clearable label=\"账号\" placeholder=\"请输入账号\" autocomplete=\"off\" />\n      <van-field\n          v-model=\"password\"\n          type=\"password\"\n          label=\"密码\"\n          placeholder=\"请输入密码\"\n          autocomplete=\"off\"\n      />\n      <van-field v-model=\"Indonesia\" clearable label=\"验证码\" placeholder=\"请输入验证码\" autocomplete=\"off\" />\n      <img id=\"Verification\" :src=\"Verification\" alt=\"Base64 Image\" @click=\"randomNum\">\n\n    </van-cell-group>\n    <van-button type=\"info\" size=\"large\" @click=\"sign1()\">登陆</van-button>\n    <div class=\"messageof\">\n      <a href=\"#/register\" class=\"register\">快速注册</a>\n      <a href style=\"color:#aaa\">找回密码</a>\n    </div>\n    <van-divider\n        :style=\"{ color: '#aaa', borderColor: '#aaa', padding: '0 16px',marginTop:'6rem' }\"\n    >其他平台登陆</van-divider>\n\n    <van-popup v-model=\"show\">\n      <p :class=\"{\n        mess : true,\n      }\" :style=\"messStyle\">{{mess}}</p>\n    </van-popup>\n  </div>\n\n\n</template>\n<script>\nimport io from 'socket.io-client';\nimport router from 'src/router.js';\n\nexport default {\n  data() {\n    return {\n      mess:\"\",\n      messStyle:\"#58bc58\",\n      show:false,\n      account: \"\",\n      password: \"\",\n      Indonesia:\"\",\n      Verification:\"\",\n      message: '',\n      receivedMessage: '',\n      socket:null\n    };\n  },\n  created() {\n    this.randomNum()\n  },\n  methods: {\n    getCookie(key) {//获取cookie值\n        var cookies = document.cookie;//name=malin; pwd=123456\n        var arr = cookies.split('; ');//['name=malin','pwd=123456']\n        for (var i = 0; i < arr.length; i++) {\n          var arr2 = arr[i].split('=');//['name','malin'\n          if (key == arr2[0]) {\n            return arr2[1];\n          }\n        };\n    },\n    async randomNum() {\n      let codeData = await this.$axios({\n        method: \"get\",\n        url: \"http://localhost:5000/user/get_Indonesia\",\n      });\n      this.Verification = \"data:image/jpg;base64,\"+codeData.data;\n    },\n    onClickLeft() {\n      // router.push({ name: \"home\" });\n      window.location.hash = \"#/\";\n      console.log(window.location.hash);\n    },\n    async sign1() {\n      let repData = await this.$axios({\n        method: \"post\",\n        url: \"http://localhost:5000/user/login/password\",\n        data: {\n          account: this.account,\n          password: this.password,\n          Indonesia: this.Indonesia\n        }\n      });\n      //登录成功\n      if(repData.data.code == 200){\n        this.messStyle = 'color:#58bc58'\n        this.$router.push({path: \"footer/home\"});\n        document.cookie = \"username\" + \"=\" + this.account + \";path=/\";\n        document.cookie = \"password\" + \"=\" + this.password + \";path=/\";\n        document.cookie = \"id\" + \"=\" + repData.data.data.id + \";path=/\";\n        //发送更新用户连接信息到socket\n      }else{\n        //登录失败\n        this.messStyle = 'color:red'\n      }\n      this.mess = repData.data.message;\n      this.show = true;\n    }\n  },\n  sockets:{\n    connect: function(){\n      console.log('socket 连接成功')\n      const data = {\n        socketid:this.$socket.id,\n        userid:getCookie('id')\n      }\n      this.$socket.emit('init',data);\n    },\n    message: function(val){\n      console.log('message:'+val);\n      this.log_list.push(val);\n    },\n    init: function(val){\n      console.log('init:'+val);\n      this.log_list.push(val);\n    },\n    sendmessage: function(val){\n      console.log('sendmessage:'+val);\n      this.log_list.push(val);\n    }\n  },\n\n};\n</script>\n<style scoped>\n.sign {\n  background: #efeff4;\n  height: 100%;\n}\n.sign .van-nav-bar {\n  background: #3993cf;\n}\n.sign .van-nav-bar__title {\n  color: #fff;\n}\n.sign .van-nav-bar__arrow {\n  font-size: 20px;\n  color: #fff;\n}\n.sign .van-button--large {\n  width: 90%;\n  margin-left: 0.5rem;\n  margin-top: 0.6rem;\n  background-color: #3993cf;\n  border-radius: 0.1rem;\n  height: 1.4rem;\n  line-height: 1.4rem;\n}\n.sign .messageof {\n  width: 100%;\n  text-align: center;\n  margin-top: 1rem;\n}\n.sign .messageof .register {\n  margin-right: 1rem;\n  color: #3993cf;\n  padding-right: 1rem;\n  border-right: 1px solid #aaa;\n}\n.sign #Verification {\n  width: 3rem;\n  height: 1.3rem;\n  position: absolute;\n  background: #3993cf;\n  top: 2.8rem;\n  right: 0.2rem;\n  z-index: 999;\n  line-height: 1.3rem;\n  text-align: center;\n  font-size: 18px;\n  color: white;\n}\n.sign .mess {\n  color: #58bc58;\n  font-size: 0.5rem;\n  display: block;\n  text-align: center;\n  margin: 20px;\n  /*line-height: 2rem;*/\n  /*color: #58bc58;*/\n  /*font-size: 0.5rem;*/\n  /*display: block;*/\n  /*width: 100%;*/\n  /*height: 2rem;*/\n  /*text-align: center;*/\n}\n.sign .mess.err {\n  color: red;\n}\n\n</style>\n\n\n"]}]}